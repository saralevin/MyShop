<head>
	<link rel="stylesheet" type="text/css" href="cart_list.css">
</head>
<body id="cartBody">
<div id="left">
	<h1>SHOPPING BAG</h1>
	<table id="cartTable">
		<tr class="descriptionFont">
			<td>Item Information</td>
			<td>Qty</td>
			<td>Price</td>
			<td>Remove</td> 
		</tr>
	    <%= @myCart.each do |productInCart| %>
			<%= render :partial =>"cartRow", :locals => {:productInCart => productInCart} %>
		<% end %>
	</table>
	<div id="totalRow">
		<div class="divsInTotal" id="sumDescription">
			<span> sub Total:</span>
			<br/>
			<span>Shipping Charge:</span> 
			<br/>
			<span class="total">TOTAL:</span> 
		</div>
		<div class="divsInTotal" id="sumNumbers">
			<span>ש"ח</span>
			<label id="subTotal_number"> <%= calcSubTotal %></label>
			<br/>
			
			<label id="ShippingCharge_number">
			<% if calcSubTotal<75 %>
				15
			<% else%>
				0
			<%end%>
			</label>
			<span>ש"ח</span>
			<br/>
			
			<label class="total" id="total_number">
			<% if calcSubTotal<75 %>
				<% shipp=15%>
			<% else%>
				<% shipp=0%>
			<%end%>
			<%= calcSubTotal+shipp %>
			</label>
			<span>ש"ח</span>
		</div>
	</div>
</div>
<div id="right">
	<%= link_to image_tag("GoTo.png"), :class=>'navButtons', :controller => 'cart_item',:action => 'shipping'%>
	<br/>
	<%= link_to image_tag("Cont.png"), :class=>'navButtons', :controller => 'products',:action => 'index'%>
</div>
</body>

<script type="text/javascript">
	function changeQuantity(code){
		alert(code);
		var productCode =code;
		var selected = $("#chooseQuantity").find('option:selected').val()
		$.ajax({
	      url: "/cart_item/changeQuantity",
	      data: {selectbox: selected,productCode: productCode },
	     
    	});
	};
	function removeProduct(productCode){
		$.ajax({
	      url: "/cart_item/removeProduct",
	      data: {productCode: productCode },
	      success: function(){ alert("The product has removed"); },
	      error: function() {  alert("error");}
    	});
	};
</script>

